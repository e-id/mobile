<Page xmlns="http://schemas.nativescript.org/tns.xsd" loaded="pageLoaded" navigatingTo="navigatingTo" >
    <ActionBar>
      <StackLayout orientation="horizontal">
        <Image src="res://logo" width="32" height="32" verticalAlignment="center" />
        <Label text="Open e-ID" fontSize="20" verticalAlignment="center" />
      </StackLayout>
      <ActionItem position="right" tap="{{ onMenu }}">
        <Button text="{{ menuIcon }}" width="40" class="fas" />
      </ActionItem>
    </ActionBar>

    <AbsoluteLayout id="fabView">
      <Button
        id="fabButton"
        text="&#xf029;"
        left="{{ fabLeft }}"
        top="{{ fabTop }}"
        width="80"
        height="80"
        class="fas fab-button"
        tap="{{ onFab }}"
      />
      <StackLayout id="mainView" layoutChanged="{{ layoutChanged }}" style="width: 100%; height: 100%;">
        <ListView
          items="{{ cards }}"
          itemTap="{{ onItemTap }}"
          separatorColor="silver"
          rowHeight="50"
          style="height: 100%;"
        >
          <ListView.itemTemplate>
            <StackLayout>
              <WrapLayout>
                <Label text="{{ selected(id) }}" class="fas" />
                <Image src="{{ 'data:image/jpeg;base64,' + photo_file }}" />
                <Label text="{{ (surname ?? '') + ' ' + (firstnames ?? '') + ' ' + validity_end_date }}" textWrap="true" />
              </WrapLayout>
            </StackLayout>
          </ListView.itemTemplate>
        </ListView>
      </StackLayout>
      <StackLayout id="menuView" class="menu" left="{{ menuLeft }}" visibility="{{ menuOn ? 'visible' : 'collapse' }}">
        <Button text="Scan" id="scan" tap="{{ onMenuItem }}" />
        <Button text="Settings" id="settings" tap="{{ onMenuItem }}" />
        <Button text="About" id="about" tap="{{ onMenuItem }}" />
      </StackLayout>
    </AbsoluteLayout>
</Page>

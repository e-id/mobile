<Page xmlns="http://schemas.nativescript.org/tns.xsd" loaded="pageLoaded" navigatingTo="navigatingTo" >
    <ActionBar>
      <StackLayout orientation="horizontal">
        <android>
          <Image src="res://logo" width="32" height="32" verticalAlignment="center" />
        </android>
        <ios>
          <Image src="~/assets/logo.png" width="32" height="32" verticalAlignment="center" />
        </ios>
        <Label text="Open e-ID" fontSize="20" verticalAlignment="center" />
      </StackLayout>
      <ActionItem android.position="menuBar" ios.position="right" tap="{{ onMenu }}">
        <android>
          <Button text="{{ menuIcon }}" width="40" class="fas" />
        </android>
        <ios>
          <Image src="~/assets/icon_menu.png" />
        </ios>
      </ActionItem>
    </ActionBar>
    <AbsoluteLayout id="fabView" style="width: 100%; height: 100%;">
      <StackLayout id="mainView" layoutChanged="{{ layoutChanged }}" style="width: 100%; height: 100%;">
        <ListView
          items="{{ cards }}"
          itemTap="{{ onItemTap }}"
          longPress="{{ onItemPress }}"
          separatorColor="silver"
          rowHeight="50"
          style="height: 100%;"
        >
          <ListView.itemTemplate>
            <StackLayout>
              <WrapLayout id="{{ id }}">
                <Label text="{{ selected(id) }}" class="fas" />
                <Image src="{{ 'data:image/jpeg;base64,' + photo_file }}" />
                <Label text="{{ (surname ?? '') + ' ' + (firstnames ?? '') + ' ' + validity_end_date }}" textWrap="true" />
              </WrapLayout>
            </StackLayout>
          </ListView.itemTemplate>
        </ListView>
      </StackLayout>
      <StackLayout id="menuView" class="menu" left="{{ menuLeft }}" visibility="{{ menuOn ? 'visible' : 'collapse' }}">
        <Button text="Scan" id="scan" tap="{{ onMenuItem }}" />
        <Button text="Settings" id="settings" tap="{{ onMenuItem }}" />
        <Button text="About" id="about" tap="{{ onMenuItem }}" />
      </StackLayout>
      <android>
        <Button
          id="fabButton"
          text="&#xf029;"
          top="{{ fabTop }}"
          left="{{ fabLeft }}"
          width="80"
          height="80"
          fontSize="40"
          class="fas fab-button"
          tap="{{ onFab }}"
        />
      </android>
      <ios>
        <Button
          id="fabButton"
          text="Scan"
          top="{{ fabTop }}"
          left="{{ fabLeft }}"
          width="80"
          height="80"
          fontSize="20"
          class="fab-button"
          tap="{{ onFab }}"
        />
      </ios>
    </AbsoluteLayout>
</Page>
